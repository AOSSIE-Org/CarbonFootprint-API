# API Access Key

{% method %}

This route enables you to authorize a user and create an access key for the API. This access key is passed along with every request to the Emission API.

### 1. Create API Key - 
This route enables takes in the ID token from auth0 recovered from local storage and is passed on as the header to acknowledge the user and create a user , assign an access key and the default rate limit.

Sample Request JSON


Method - __POST__

**Request Code**

Header
```JSON
{
    Content-Type : application/json,
    authorization : Bearer <id_token> 
}
```

**Response Code**

`200` - Valid Request
```JSON
{
    "success": true,
    "apikey": "<api access key>"
}
```
`400` - Error 
```JSON
{
    success: false,
    err: <error>
}
```
This route throws an error if a __api key already exists for the user__ , or the __connection to the database fails__ , or if the user trying to create an API key has not __verified the primary email__ used to signup and create the token.    

### 2. Retrieve API Key -
This route is used to retrieve the API access key for a specific user if it has been already created.

Sample request JSON

Method-__GET__

**Request Code**

Header
```JSON
{
    Content-Type : application/json,
    authorization : Bearer <id_token> 
}
```

**Response Code**

`200` - Valid Request
```JSON
{
    "success": true,
    "apikey": "<api access key>"
}
```
`400` - Error 
```JSON
{
    success: false,
    err: <error>
}
```
This route returns __"Unable to find user"__ if user's api key doesn't key exists in the database.

### 3. Delete API Key - 
This route is used to delete the API access key for a specific user if it has been already created.

Sample Request JSON

Method - __DELETE__

**Request Code**

Header
```JSON
{
    Content-Type : application/json,
    authorization : Bearer <id_token> 
}
```

**Response Code**

`200` - Valid Request
```JSON
{
   "success": true,
   "deleted": "<user's email-id>"
}
```
`400` - Error 
```JSON
{
    success: false,
    err: <error>
}
```
This route throws a __"User not found"__ error if the user's api key doesn't exist in the database.

{% sample lang="http" %}
```
ROUTE /auth/key
```
| Name        | Type           | Description  |
| ------------- |-------------| -----|
| Content-Type | string | Request type i.e. application/json |
| authorization  | string | **Required:** Id token generated by Auth0 after logging into the client. |
{% endmethod %}